"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[741,620],{92741:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var r=t(67294),l=t(64729),i=t(53854),o=t(9498),s=t(1137),a=t(81155),c=t(48620),u=t(10733),d=t(2108),m=t(85893);function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,i,o,s=[],a=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;a=!1}else for(;!(a=(r=i.call(t)).done)&&(s.push(r.value),s.length!==n);a=!0);}catch(e){c=!0,l=e}finally{try{if(!a&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw l}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const p=function(e){var n,t=e.close,h=e.task,p=e.onSuccess,v=f((0,r.useState)(null),2),x=v[0],j=v[1],g=f((0,r.useState)(null),2),b=g[0],y=g[1],w=f((0,r.useState)(""),2),N=w[0],k=w[1],S=f((0,r.useState)(""),2),R=S[0],C=S[1],I=f((0,r.useState)(""),2),O=I[0],A=I[1],F=new d.n(window.Laravel.user),L=f((0,u.Cq)(),2),P=L[0],Y=L[1].isLoading,_=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0}),M=6===(null==F?void 0:F.getRoleId())?[4,8]:[4,6],B=[{id:1,name:"Project Manager /Team Lead ".concat(6===(null==F?void 0:F.getRoleId())?"":"/ Lead Developer"," Is Making Me Do Their Work Without Top Managementsâ€™ Authorization"),info:"Your report will be kept private and management won't disclose your name to anyone including the project manager and lead developer!"},{id:2,name:"Need Further Clarification From ".concat(6===(null==F?void 0:F.getRoleId())?"Team Lead":"Lead Developer"," / Project Manager"),info:""}];return(0,m.jsx)(r.Fragment,{children:(0,m.jsxs)("form",{className:"px-3",children:[(0,m.jsxs)("div",{className:"form-group",children:[(null==x?void 0:x.info)&&(0,m.jsx)("div",{className:"f-12 alert alert-info py-1",children:null==x?void 0:x.info}),(0,m.jsx)("label",{htmlFor:"",className:"font-weight-bold",children:"Select Reason for report"}),(0,m.jsx)("div",{className:"position-relative w-100 mb-3",children:(0,m.jsxs)(l.R,{value:x,onChange:j,children:[(0,m.jsxs)(l.R.Button,{className:"w-100 bg-white py-2 pl-2 pr-1 border text-left d-flex align-items-center justify-content-between",children:[(0,m.jsx)("span",{className:"mr-auto",children:null!==(n=null==x?void 0:x.name)&&void 0!==n?n:(0,m.jsx)("span",{style:{color:"#aaa"},children:" -- "})}),(0,m.jsx)(i.YZt,{className:"f-16"})]}),(0,m.jsx)(l.R.Options,{className:"position-absolute bg-white p-2 shadow w-100",style:{zIndex:10,maxHeight:"350px",overflowY:"auto"},children:null==B?void 0:B.map((function(e){return(0,m.jsx)(l.R.Option,{value:e,className:function(e){var n=e.selected,t=e.active;return n?"task-selection-list-option selected":t?"task-selection-list-option active":"task-selection-list-option"},children:(0,m.jsx)("div",{children:(0,m.jsx)("div",{children:null==e?void 0:e.name})})},e.id)}))})]})}),(null==O?void 0:O.reason)&&(0,m.jsx)("div",{className:"f-14",style:{color:"red"},children:null==O?void 0:O.reason})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"",className:"font-weight-bold",children:"Responsible Person"}),(0,m.jsx)("div",{className:"position-relative w-100 mb-3",children:(0,m.jsx)(c.default,{person:b,setPerson:y,roles:M})}),(null==O?void 0:O.person)&&(0,m.jsx)("div",{className:"f-14",style:{color:"red"},children:null==O?void 0:O.person})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"editor",className:"font-weight-bold",children:"Briefly describe the problem here..."}),(0,m.jsx)("div",{className:"ck-editor-holder",children:(0,m.jsx)(a.Z,{onChange:function(e,n){var t=n.getData();k(t)}})}),(null==O?void 0:O.comment)&&(0,m.jsx)("div",{className:"f-14",style:{color:"red"},children:null==O?void 0:O.comment})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"",className:"font-weight-bold",children:"Did you report the same issue previously?"}),(0,m.jsxs)("div",{className:"",children:[(0,m.jsxs)("div",{className:"form-check form-check-inline",children:[(0,m.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"yes",onChange:function(e){return C(e.target.value)}}),(0,m.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio1",children:"Yes"})]}),(0,m.jsxs)("div",{className:"form-check form-check-inline",children:[(0,m.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"no",onChange:function(e){return C(e.target.value)}}),(0,m.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio2",children:"No"})]})]}),(null==O?void 0:O.previousReport)&&(0,m.jsx)("div",{className:"f-14",style:{color:"red"},children:null==O?void 0:O.previousReport})]}),(0,m.jsxs)("div",{className:"my-3 d-flex align-items-center",children:[(0,m.jsx)(o.Z,{variant:"tertiary",onClick:t,className:"ml-auto mr-2",children:"Close"}),(0,m.jsx)(s.Z,{onClick:function(e){var n;e.preventDefault();var r,l,i={reason:null==x?void 0:x.name,person:null==b?void 0:b.id,comment:N,previousNotedIssue:R,user_id:null===(n=window)||void 0===n||null===(n=n.Laravel)||void 0===n||null===(n=n.user)||void 0===n?void 0:n.id,task_id:null==h?void 0:h.id};r=new Object,l=0,x||(l++,r.reason="Please select a reason for report!"),b||(l++,r.person="Select the responsible person!"),""===N&&(l++,r.comment="Please write a briefly describe about this report!"),""===R&&(l++,r.previousReport="You have to select an option."),A(r),l?Swal.fire({position:"center",icon:"error",title:"Please fillup the all required fields!",showConfirmButton:!0}):P(i).unwrap().then((function(e){_.fire({icon:"success",title:"Report Issued Successfully!"}),t(),p()}))},isLoading:Y,title:"Report"})]})]})})}},48620:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(67294),l=t(45324),i=t(94789),o=t(96486),s=t.n(o),a=t(53854),c=t(85893);function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,i,o,s=[],a=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;a=!1}else for(;!(a=(r=i.call(t)).done)&&(s.push(r.value),s.length!==n);a=!0);}catch(e){c=!0,l=e}finally{try{if(!a&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw l}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const m=function(e){var n,t=e.person,o=e.setPerson,d=e.filter,m=e.roles,f=void 0===m?[]:m,h=(0,l.U)(),p=h.users,v=h.usersIsFetching,x=u((0,r.useState)(""),2),j=x[0],g=x[1],b=s().filter(p,(function(e){return!s().isNull(e.role_id)}));if(f&&s().size(f)>0)b=s().filter(p,(function(e){return s().includes(f,Number(e.role_id))}));else if(d)switch(d){case"client":b=s().filter(p,(function(e){return s().isNull(e.role_id)}));break;case"developer":b=s().filter(p,(function(e){return s().includes([5,8,10],Number(e.role_id))}))}var y=""===j?b:null===(n=b)||void 0===n?void 0:n.filter((function(e){return s().lowerCase(e.name).includes(s().lowerCase(j))}));return(0,c.jsx)("div",{className:"position-relative w-100 mb-3",children:(0,c.jsxs)(i.h,{value:t,onChange:o,children:[(0,c.jsxs)(i.h.Button,{className:"position-relative w-100",children:[(0,c.jsx)(i.h.Input,{className:"w-100 bg-white py-2 pl-2 pr-1 border d-flex align-items-center justify-content-between",displayValue:function(e){return null==e?void 0:e.name},onChange:function(e){return g(e.target.value)},placeholder:"--"}),(0,c.jsx)("span",{style:{position:"absolute",top:"50%",right:"5px",transform:"translateY(-50%)"},children:(0,c.jsx)(a.YZt,{})})]}),(0,c.jsx)(i.h.Options,{className:"position-absolute bg-white p-2 shadow w-100",style:{zIndex:10,maxHeight:"350px",overflowY:"auto"},children:y&&y.length?y.map((function(e){return(0,c.jsx)(i.h.Option,{value:e,className:function(e){var n=e.selected,t=e.active;return n?"task-selection-list-option selected":t?"task-selection-list-option active":"task-selection-list-option"},children:function(n){var t,r=n.selected;return(0,c.jsxs)("div",{className:"d-flex align-items-center bg-transparent f-14",style:{gap:"10px"},children:[(0,c.jsx)("img",{src:null==e?void 0:e.image_url,alt:null==e?void 0:e.name,width:24,height:24,className:"rounded-circle"}),r,(0,c.jsxs)("span",{className:"w-100",children:[null==e?void 0:e.name," ",(0,c.jsx)("span",{className:"badge badge-success",children:null==e||null===(t=e.employee_detail)||void 0===t||null===(t=t.designation)||void 0===t?void 0:t.name})]}),r&&(0,c.jsxs)("span",{className:"ml-auto",children:[" ",(0,c.jsx)("i",{className:"fa-solid fa-check text-white"})," "]})]})}},e.id)})):(0,c.jsx)("div",{className:"task-selection-list-option",children:v?"Loading...":"Nothing found."})})]})})}}}]);
//# sourceMappingURL=741.js.map