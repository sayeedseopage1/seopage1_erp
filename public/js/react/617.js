"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[617],{13617:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var r=t(67294),a=t(22569),l=t(22695),i=t(75737),o=t(74094),s=t(27060),d=t(96486),u=t.n(d),c=t(31737),v=t(27484),m=t.n(v),g=t(9054),p=t(41248),f=t(43347),h=t(89206),x=t(50502),b=t(96030),j=t(33241),y=t(24558),w=t(28645),N=t(2108),k=t(85893);function S(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,l=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(o)throw a}}return l}(e,n)||C(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){if(e){if("string"==typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var D=new i.s;function A(e){var n=e.isLoading,t=e.filter,a=e.tableName,i=e.search,d=e.reportPermission,v=(0,p.v9)((function(e){return e.tasks})).subtasks,_=P(r.useState([]),2),C=_[0],M=_[1],A=P(r.useState({}),2),I=A[0],Z=A[1],Y=P(r.useState([]),2),E=Y[0],R=Y[1],F=P(r.useState({pageIndex:0,pageSize:10}),2),T=F[0],z=T.pageIndex,K=T.pageSize,O=F[1],L=P(r.useState(!1),2),B=L[0],G=L[1],U=P(r.useState(""),2),H=(U[0],U[1]),V=r.useMemo((function(){return v}),[v]);r.useEffect((function(){u().size(V)===u().size(C)?(G(!0),V&&M(V)):V&&M(V)}),[V]),r.useEffect((function(){B&&G(!1)}),[C]);var $=r.useMemo((function(){return[{id:"task",header:"Task",accessorFn:function(e){return"".concat(e.id).concat(e.heading)},cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("abbr",{title:null==t?void 0:t.heading,style:{textDecoration:"none"},children:(0,k.jsx)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:(0,k.jsxs)("a",{href:"/account/tasks/".concat(null==t?void 0:t.id),className:"hover-underline multine-ellipsis",children:[" ",null==t?void 0:t.heading," "]})})})}},{id:"timer_status",header:"Timer Status",accessorKey:"subtasks_timer_active",cell:function(e){var n=e.row,t=null==n?void 0:n.original,r=null==t?void 0:t.subtasks_timer_active,a=u().size(null==t?void 0:t.subtasks_count),l=r>0,i=0,o=0;null!=t&&t.start_time&&u().isNull(null==t?void 0:t.end_time)&&(i=D.dayjs(null==t?void 0:t.start_time).unix(),o=D.dayjs().unix()-i);var s=(null==t?void 0:t.start_time)&&u().isNull(null==t?void 0:t.end_time),d=l||s?"#54B688":"#DCDEE1";return(0,k.jsxs)("div",{style:{color:d},className:"d-flex align-items-center",children:[(0,k.jsx)("i",{className:"fa-solid fa-stopwatch f-18"}),void 0===n.parentId&&0===a&&!s&&(0,k.jsx)("span",{className:"ml-2",children:(0,k.jsx)("strong",{children:r})}),s&&(0,k.jsx)("span",{className:"ml-1 badge badge-primary text-white",style:{fontSize:"11px"},children:(0,k.jsx)(x.Z,{time:o,run:s})})]})}},{id:"milestone",header:"Milestone",accessorKey:"milestone_title",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("abbr",{title:null==t?void 0:t.milestone_title,style:{textDecoration:"none"},children:(0,k.jsx)("span",{className:"multine-ellipsis word-break",children:null==t?void 0:t.milestone_title})})}},{id:"deliverable",header:"Deliverable",accessorKey:"deliverable_title",cell:function(e){var n,t=e.row,r=null==t?void 0:t.original;return(0,k.jsx)("abbr",{title:null==r?void 0:r.deliverable_title,style:{textDecoration:"none"},children:(0,k.jsx)("span",{className:"multine-ellipsis word-break",children:null!==(n=null==r?void 0:r.deliverable_title)&&void 0!==n?n:"--"})})}},{id:"project",header:"Project",accessorFn:function(e){return"".concat(null==e?void 0:e.project_id).concat(project_name)},cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("abbr",{title:null==t?void 0:t.project_name,style:{textDecoration:"none"},children:(0,k.jsx)("a",{href:"/account/projects/".concat(null==t?void 0:t.project_id),className:"multine-ellipsis",children:null==t?void 0:t.project_name})})}},{id:"client",header:"Client",accessorKey:"client_name",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("div",{children:(0,k.jsx)(j.Z,{url:"/account/clients/".concat(null==t?void 0:t.client_id),avatar:null==t?void 0:t.client_avatar,name:null==t?void 0:t.client_name})})}},{id:"project_manager",header:"Project Manager",accessorKey:"pm_id_name",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)(j.Z,{url:"/account/employees/".concat(null==t?void 0:t.project_manager_id),name:null==t?void 0:t.pm_id_name,avatar:null==t?void 0:t.pm_id_avatar})}},{id:"creation_date",header:"Creation Date",accessorKey:"creation_date",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("span",{children:null==t?void 0:t.creation_date})}},{id:"due_date",header:"Due Date",accessorKey:"due_date",cell:function(e){var n,t=e.row,r=null==t?void 0:t.original,a=null==r?void 0:r.due_date,l=D.dayjs(),i="";return D.isSame(l,a)?(a="Today",i="red"):D.isAfter(l,a)&&(i="red"),a="Today"===a?a:m()(a).format("DD-MM-YYYY"),(0,k.jsx)("span",{style:{color:i},children:(0,k.jsx)("strong",{children:null!==(n=a)&&void 0!==n?n:"--"})})}},{id:"start_date",header:"Started Date",accessorKey:"start_date",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("strong",{children:null!=t&&t.start_date?(0,k.jsxs)(k.Fragment,{children:[m()(null==t?void 0:t.start_date).format("DD-MM-YYYY")," ",(0,k.jsx)("br",{})]}):"--"})}},{id:"completion_date",header:"Completion Date",accessorKey:"completion_date",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("strong",{children:4===Number(null==t?void 0:t.board_column_id)?(null==t?void 0:t.completion_date)&&(0,k.jsxs)(k.Fragment,{children:[m()(null==t?void 0:t.completion_date).format("DD-MM-YYYY")," ",(0,k.jsx)("br",{})]}):"--"})}},{id:"approved_on",header:"Approved On",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("strong",{children:null!=t&&t.task_approval_date?(0,k.jsx)(k.Fragment,{children:m()(null==t?void 0:t.task_approval_date).format("DD-MM-YYYY")}):(0,k.jsx)("span",{className:"badge text-white word-break",style:{background:"#f5c308"},children:"Not Completed Yet!"})})}},{id:"estimated_time",header:"Estimated Time",cell:function(e){var n,t,r=e.row,a=null==r?void 0:r.original;return(0,k.jsxs)("div",{children:[null!==(n=null==a?void 0:a.estimate_hours)&&void 0!==n?n:0," hrs ",(0,k.jsx)("br",{}),null!==(t=null==a?void 0:a.estimate_minutes)&&void 0!==t?t:0," mins"]})}},{id:"hours_logged",header:"Hours Logged",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("div",{children:(0,l.r)(null==t?void 0:t.subtasks_hours_logged)})}},{id:"assigned_by",header:"Assigned By",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)(j.Z,{url:"/account/employees/".concat(null==t?void 0:t.added_by),avatar:null==t?void 0:t.added_by_avatar,name:null==t?void 0:t.added_by_name})}},{id:"assigned_to",header:"Assigned To",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)(j.Z,{url:"/account/employees/".concat(null==t?void 0:t.assigned_to_id),avatar:null==t?void 0:t.assigned_to_avatar,name:null==t?void 0:t.assigned_to_name})}},{id:"status",header:"Task Status",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)("span",{className:"badge text-white",style:{background:null==t?void 0:t.label_color},children:null==t?void 0:t.column_name})}},{id:"progress",header:"Progress",cell:function(e){var n=e.row,t=null==n?void 0:n.original,r=Number(null==t?void 0:t.subtasks_count),a=Number(null==t?void 0:t.subtasks_completed_count),l="bg-transparent",i=0;return l=100===(i=r>0?a/r*100:4===(null==t?void 0:t.board_column_id)?100:0)?"bg-success":i<100&&i>=75?"bg-info":i<75&&i>=25?"bg-warning":"bg-danger",(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:"progress",style:{height:"16px"},children:(0,k.jsxs)("div",{className:"progress-bar progress-bar-striped progress-bar-animated ".concat(l),role:"progressbar",style:{width:"".concat(i,"%")},"aria-valuenow":"10","aria-valuemin":"0","aria-valuemax":"100",children:[Math.floor(i),"%"]})})})}},{id:"report",header:"Report",cell:function(e){var n=e.row,t=null==n?void 0:n.original;return(0,k.jsx)(w.Z,{row:t})}},{id:"action",header:"Action",cell:function(e){var n=e.row;null==n||n.original;return(0,k.jsx)("div",{children:(0,k.jsxs)(f.Z,{children:[(0,k.jsx)(f.Z.Toggle,{icon:!1,children:(0,k.jsx)(h.Z,{variant:"tertiary",children:(0,k.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})}),(0,k.jsxs)(f.Z.Menu,{className:"p-1",children:[(0,k.jsxs)(f.Z.Item,{className:"sp1_tasks_tbl_action",children:[(0,k.jsx)("i",{className:"fa-regular fa-pen-to-square mr-2"}),"Edit"]}),(0,k.jsxs)(f.Z.Item,{className:"sp1_tasks_tbl_del",children:[(0,k.jsx)("i",{className:"fa-solid fa-trash-can mr-2"}),"Delete"]})]})]})})}}]})),q=P(r.useState(S($)),2),W=q[0],J=q[1];r.useEffect((function(){var e,n,t=new N.n(null===(e=window)||void 0===e||null===(n=e.Laravel)||void 0===n?void 0:n.user),r=S($);if(!u().includes(d,null==t?void 0:t.getRoleId())){var a=null==r?void 0:r.filter((function(e){return"report"!==e.id}));J(S(a))}}),[]);var Q=P(r.useState(u().map(W,"id")),2),X=Q[0],ee=Q[1],ne=r.useMemo((function(){return{pageIndex:z,pageSize:K}}),[z,K]),te=(0,o.b7)({data:C,columns:W,state:{sorting:E,expanded:I,columnOrder:X,pagination:ne,tableName:a,filter:t,globalFilter:i},onGlobalFilterChange:H,autoResetPageIndex:!B,onPaginationChange:O,onSortingChange:R,onExpandedChange:Z,getSubRows:function(e){return e.subtasks},onColumnOrderChange:ee,getCoreRowModel:(0,s.sC)(),getPaginationRowModel:(0,s.G_)(),getFilteredRowModel:(0,s.vL)(),getExpandedRowModel:(0,s.rV)(),getSortedRowModel:(0,s.tj)(),paginateExpandedRows:!1});return(0,k.jsxs)(r.Fragment,{children:[(0,k.jsxs)("div",{className:"sp1_tasks_table_wrapper",children:[(0,k.jsxs)("table",{className:"sp1_tasks_table",children:[(0,k.jsx)("thead",{className:"sp1_tasks_thead",children:te.getHeaderGroups().map((function(e){return(0,k.jsx)("tr",{className:"sp1_tasks_tr",children:e.headers.map((function(e){return(0,k.jsx)(y.d,{header:e,table:te},e.id)}))},e.id)}))}),(0,k.jsxs)("tbody",{className:"sp1_tasks_tbody",children:[!n&&te.getRowModel().rows.map((function(e){return(0,k.jsx)("tr",{className:"sp1_tasks_tr ".concat(void 0!==e.parentId?"expended_row":""," ").concat(e.getIsExpanded()?"expended_parent_row":""),children:e.getVisibleCells().map((function(e){return(0,k.jsx)("td",{className:"px-2 sp1_tasks_td",children:(0,o.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)})),n&&(0,k.jsx)(g.Z,{})]})]}),!n&&0===u().size(te.getRowModel().rows)&&(0,k.jsx)(b.Z,{})]}),(0,k.jsx)(c.Z,{currentPage:z+1,perpageRow:K,onPageSize:function(e){return te.setPageSize(e)},onPaginate:function(e){return te.setPageIndex(e-1)},totalEntry:te.getPageCount()*K,onNext:function(){return te.getCanNextPage()&&te.nextPage()},disableNext:!te.getCanNextPage(),onPrevious:function(){return te.getCanPreviousPage()&&te.previousPage()},disablePrevious:!te.getCanPreviousPage(),totalPages:te.getPageCount()})]})}var I=t(31287),Z=t(74236),Y=t(42805),E=t(46018),R=t(29874);function F(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,l=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(o)throw a}}return l}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const z=function(){(0,p.v9)((function(e){return e.tasks})).tasks;var e=(0,p.I0)(),n=F(r.useState(null),2),t=n[0],l=n[1],i=F(r.useState(""),2),o=i[0],s=i[1],d=F((0,E.bv)(),2),u=d[0],c=d[1].isFetching;return(0,k.jsxs)(r.Fragment,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(Z.Z,{onFilter:function(n){var t=_.pickBy(n,Boolean),r=new URLSearchParams(t).toString();l(t),null!=n&&n.start_date&&null!=n&&n.end_date&&u("".concat(r)).unwrap().then((function(n){var t=_.orderBy(null==n?void 0:n.tasks,"due_date","desc");e((0,R.ZS)({subtasks:t}))})).catch((function(e){return console.log(e)}))},page:"subtasks"})}),(0,k.jsx)("div",{className:"sp1_tlr_container",children:(0,k.jsxs)("div",{className:"sp1_tlr_tbl_container",children:[(0,k.jsxs)("div",{className:"mb-3 d-flex align-items-center flex-wrap justify-content-between",children:[(0,k.jsx)(a.Z,{}),(0,k.jsx)("div",{style:{maxWidth:"300px"},children:(0,k.jsx)(Y.Z,{value:o,onChange:s})})]}),(0,k.jsx)(A,{isLoading:c,filter:t,tableName:"tasksTable",search:o,reportPermission:[1,8,5]})]})})]})}}}]);
//# sourceMappingURL=617.js.map