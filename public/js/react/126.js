"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[126],{86126:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(74094),s=r(27060),a=r(67294),l=r(24558);var i=r(33241),o=r(80986),d=r(411),c=r(81155),u=r(50202),p=r(46018),m=r(96486),h=r.n(m),v=r(41248),f=r(29874),x=r(85893);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,l,i=[],o=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){d=!0,s=e}finally{try{if(!o&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const b=function(e){var t,r=e.row,n=_(a.useState(!1),2),s=n[0],l=n[1],i=_(a.useState(""),2),m=(i[0],i[1],_(a.useState(""),2)),g=m[0],b=m[1],j=_((0,p.X)(),2),y=j[0],N=j[1].isLoading,w=(0,v.I0)(),k=function(){return l(!1)},S=h().includes([1],null===(t=window)||void 0===t||null===(t=t.Laravel)||void 0===t||null===(t=t.user)||void 0===t?void 0:t.role_id),C=function(e){var t={status:e,report_id:null==r?void 0:r.id,admin_comment:g};g&&y(t).unwrap().then((function(t){200===t.status&&(w((0,f.ee)({id:null==r?void 0:r.id,status:e})),document.getElementById("body").style.cursor="default",k())}))},A="approved"===(null==r?void 0:r.status)?"success":"tertiary",I="approved"===(null==r?void 0:r.status)?"Resoved":"pending"===(null==r?void 0:r.status)?"Resove":h().startCase(null==r?void 0:r.status),V="pending"===(null==r?void 0:r.status)?"badge-primary":"approved"===(null==r?void 0:r.status)?"badge-success":"badge-warning";return(0,x.jsxs)("div",{children:[!S&&(0,x.jsx)("span",{className:"badge ".concat(V),children:null==r?void 0:r.status}),S&&(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(d.Z,{onClick:function(){return"pending"===(null==r?void 0:r.status)&&void l(!0)},variant:A,className:"denied"===(null==r?void 0:r.status)?"sp1_tasks_tbl_report_btn":"",children:I}),(0,x.jsx)(a.Fragment,{children:(0,x.jsx)(o.Z,{isOpen:s,children:(0,x.jsx)("div",{className:"sp1_modal-content-wrapper",children:(0,x.jsxs)("div",{className:"sp1_modal-panel",children:[(0,x.jsxs)("div",{className:"sp1_modal-head",children:[(0,x.jsx)("div",{className:"sp1_modal-title pl-2",children:(0,x.jsx)("strong",{children:"Report Details"})}),(0,x.jsx)(d.Z,{onClick:k,"aria-label":"ModalClose",variant:"tertiary",className:"sp1_modal-close",children:(0,x.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,x.jsxs)("div",{className:"sp1_modal-body p-3",children:[(0,x.jsx)("div",{className:"ck-editor-holder",children:(0,x.jsx)(c.Z,{onChange:function(e,t){var r=t.getData();b(r)},placeholder:"Write your comment here!"})}),(0,x.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-end py-4",children:(0,x.jsxs)("div",{className:"ml-auto d-flex align-items-center w-fit",style:{gap:"10px"},children:[(0,x.jsx)(u.Z,{variant:"success",title:"Approve & Close",onClick:function(){return C("approved")},isLoading:N,className:"ml-auto mr-2"}),!N&&(0,x.jsx)(u.Z,{title:"Deny & Close",onClick:function(){return C("denied")},isLoading:N,className:"deny_button"})]})})]})]})})})})]})]})};var j=r(57046);function y(){return h().times(5,(function(e){return(0,x.jsxs)("tr",{className:"sp1_tasks_tr",children:[(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"50px",height:"14px",className:"mb-1"})}),(0,x.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,x.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,x.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td",children:[(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"60%",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td",children:[(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"40%",height:"13px",className:"mb-1"})]}),(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})}),(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})}),(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})})]},e)}))}var N=r(96030);function w(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,l,i=[],o=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){d=!0,s=e}finally{try{if(!o&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return i}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const A=function(e){var t=e.reports,r=void 0===t?[]:t,o=(e.task,e.search),d=e.tableName,c=void 0===d?"sp1-table":d,u=e.isLoading,p=void 0===u||u,m=k(a.useState(w(r)),2),v=m[0],f=m[1],_=k(a.useState([]),2),g=_[0],j=_[1],S=k(a.useState({pageIndex:0,pageSize:10}),2),C=S[0],A=C.pageIndex,I=C.pageSize,V=S[1],R=a.useMemo((function(){return[{id:"serial_no",header:"Serial No.",accessorKey:"id",cell:function(e){return e.getValue()}},{id:"report_issuer",header:"Report Issuer",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:(0,x.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.added_by),name:null==r?void 0:r.report_issue_added_by,avatar:null==r?void 0:r.report_issue_added_by_avatar})})}},{id:"accountable_individual",header:"Accountable Individual",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:(0,x.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.person),name:null==r?void 0:r.responsible_person_name,avatar:null==r?void 0:r.responsible_person_avatar})})}},{id:"report_reason",header:"Report Reason",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:null==r?void 0:r.reason})}},{id:"report_reason_details",header:"Report Reason Details",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("div",{className:"sp1_ck_content",dangerouslySetInnerHTML:{__html:null==r?void 0:r.comment}})}},{id:"pre_reported",header:"Previously Reported",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:null==r?void 0:r.previousNotedIssue})}},{id:"action",header:"Action",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)(b,{row:r})}}]})),M=k(a.useState(w(R)),1)[0],O=k(a.useState(h().map(M,"id")),2),Z=O[0],L=O[1],D=a.useMemo((function(){return{pageIndex:A,pageSize:I}}),[A,I]);a.useEffect((function(){f(w(r))}),[r]);var E=(0,n.b7)({data:v,columns:M,state:{sorting:g,columnOrder:Z,pagination:D,tableName:c,globalFilter:o},onPaginationChange:V,onSortingChange:j,onColumnOrderChange:L,getCoreRowModel:(0,s.sC)(),getPaginationRowModel:(0,s.G_)(),getFilteredRowModel:(0,s.vL)(),getSortedRowModel:(0,s.tj)()});return(0,x.jsxs)("div",{className:"sp1_tasks_table_wrapper sp1_tasks_report_table_wrapper",children:[(0,x.jsxs)("table",{className:"sp1_tasks_table sp1_tasks_report_table",children:[(0,x.jsx)("thead",{className:"sp1_tasks_thead",children:E.getHeaderGroups().map((function(e){return(0,x.jsx)("tr",{className:"sp1_tasks_tr",children:e.headers.map((function(e){return(0,x.jsx)(l.d,{header:e,table:E,className:"sp1_tasks_report_th"},e.id)}))},e.id)}))}),(0,x.jsxs)("tbody",{className:"sp1_tasks_tbody",children:[p&&(0,x.jsx)(y,{}),!p&&E.getRowModel().rows.map((function(e){return(0,x.jsx)("tr",{className:"sp1_tasks_tr",children:e.getVisibleCells().map((function(e){return(0,x.jsx)("td",{className:"px-2 sp1_tasks_td sp1_tasks_report_td",children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))]})]}),!p&&0===h().size(v)&&(0,x.jsx)(N.Z,{})]})}}}]);
//# sourceMappingURL=126.js.map